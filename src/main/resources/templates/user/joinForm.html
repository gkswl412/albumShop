<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout1}">
<head>
<title>회원가입</title>
<meta charset="utf-8" />
<th:block layout:fragment="style1">
	<style>
.id_input_re_1{
		color : green;
		display : none;
	}
.id_input_re_2{
		color : red;
		display : none;
	}
</style>
</th:block>


</head>
<body>
	<div class="panel-body" layout:fragment="content1">

		<h2>회원가입</h2>
		<form method="post" action="joinProc">

			<div class="form-group">
				<label for="id">아이디</label> <input type="text" class="form-control"
					id="id" name="id" value="">
					
					
		        <span class="id_input_re_1">사용 가능한 아이디입니다.</span>
				<span class="id_input_re_2">아이디가 이미 존재합니다.</span>
			</div>

			<div class="form-group">
				<label for="pass">비밀번호</label> <input type="text"
					class="form-control" id="pass" name="pass" value="">
			</div>

			<div class="form-group">
				<label for="name">이름</label> <input type="text" class="form-control"
					id="name" name="name" value="">
			</div>
            <div class="form-group">
				<label for="phone">전화번호</label> <input type="tel" class="form-control"
					id="phone" name="phone" value="">
			</div>
			<div class="form-group">
				<label for="address">주소</label> <input type="text"
					class="form-control" id="address" name="address" value="">
			</div>
			<div class="form-group">
				<label for="email">이메일</label> <input type="text"
					class="form-control" id="email" name="email" value="">
			</div>
			
			<div class="form-group">
				<label for="birth">생년월일</label> <input type="date"
					class="form-control" id="birth" name="birth" value="">
			</div>
			<div class="form-group">
				<label for="gender">성별</label> <select class="form-control"
					id="gender" name="gender">
					<option>남자</option>
					<option>여자</option>
				</select>
			</div>

			<div class="form-group">
				<label for="nickname">닉네임</label> <input type="text"
					class="form-control" id="nickname" name="nickname" value="">
			</div>
			
				<label for="grade"></label> <input type="hidden" id="grade"
					name="grade" value="bronze" />
				<label for="score"></label> <input type="hidden" id="score"
					name="score" value="0" />


			<input type="hidden" th:name="${_csrf.parameterName}"
				th:value="${_csrf.token}" />
			<button type="submit" class="btn">가입</button>
		</form>

	</div>
	
<th:block layout:fragment="script1">	
<script>
$('#id').on("propertychange change keyup paste input", function(){

	var id = $('#id').val();		
	var data = {id : id}				
	
	$.ajax({
		type : "post",
		url : "/IdCheck",
		data : data,
		success : function(result){
			if(result != 'fail'){
				$('.id_input_re_1').css("display","inline-block");
				$('.id_input_re_2').css("display", "none");				
			} else {
				$('.id_input_re_2').css("display","inline-block");
				$('.id_input_re_1').css("display", "none");				
			}
			
		}
	}); 	
});
</script>
</th:block>
</body>
</html>